/*! For license information please see LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WSDKLoader=e():t.WSDKLoader=e()}(self,(()=>(()=>{var t={887:t=>{var e;window,e=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/index.ts")}({"./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! exports provided: SxSDesktopService, DEFAULT_PORT, DEFAULT_HTTP_HEADERS, DEFAULT_HOST, DEFAULT_PATH, PING_PATH, DEFAULT_HTTP_CLIENT_PROTOCOL, DAPI_MAX_DETECT_TIME_MS, DAPI_MIN_PORT, DAPI_MAX_PORT, PORT_NOT_FOUND_ERROR, TIMEOUT_ERROR, NetworkConnection, SxSSession, SxSApplication, SxSContextService */function(t,e,n){"use strict";n.r(e);var r=n(/*! ./sxs-desktop-service.classes */"./src/sxs-desktop-service.classes.ts");n.d(e,"SxSDesktopService",(function(){return r.SxSDesktopService}));var o=n(/*! ./network-connection.consts */"./src/network-connection.consts.ts");n.d(e,"DEFAULT_PORT",(function(){return o.DEFAULT_PORT})),n.d(e,"DEFAULT_HTTP_HEADERS",(function(){return o.DEFAULT_HTTP_HEADERS})),n.d(e,"DEFAULT_HOST",(function(){return o.DEFAULT_HOST})),n.d(e,"DEFAULT_PATH",(function(){return o.DEFAULT_PATH})),n.d(e,"PING_PATH",(function(){return o.PING_PATH})),n.d(e,"DEFAULT_HTTP_CLIENT_PROTOCOL",(function(){return o.DEFAULT_HTTP_CLIENT_PROTOCOL})),n.d(e,"DAPI_MAX_DETECT_TIME_MS",(function(){return o.DAPI_MAX_DETECT_TIME_MS})),n.d(e,"DAPI_MIN_PORT",(function(){return o.DAPI_MIN_PORT})),n.d(e,"DAPI_MAX_PORT",(function(){return o.DAPI_MAX_PORT})),n.d(e,"PORT_NOT_FOUND_ERROR",(function(){return o.PORT_NOT_FOUND_ERROR})),n.d(e,"TIMEOUT_ERROR",(function(){return o.TIMEOUT_ERROR}));var i=n(/*! ./network-connection.classes */"./src/network-connection.classes.ts");n.d(e,"NetworkConnection",(function(){return i.NetworkConnection}));var s=n(/*! ./sxs-session.classes */"./src/sxs-session.classes.ts");n.d(e,"SxSSession",(function(){return s.SxSSession}));var a=n(/*! ./sxs-application.classes */"./src/sxs-application.classes.ts");n.d(e,"SxSApplication",(function(){return a.SxSApplication}));var c=n(/*! ./sxs-context-service.classes */"./src/sxs-context-service.classes.ts");n.d(e,"SxSContextService",(function(){return c.SxSContextService})),n(/*! ./polyfills/promise-any */"./src/polyfills/promise-any.ts")},"./src/network-connection.classes.ts":
/*!*******************************************!*\
  !*** ./src/network-connection.classes.ts ***!
  \*******************************************/
/*! exports provided: NetworkConnection */function(t,e,n){"use strict";n.r(e),n.d(e,"NetworkConnection",(function(){return o}));var r=n(/*! ./network-connection.consts */"./src/network-connection.consts.ts"),o=function(){function t(){this._host=r.DEFAULT_HOST,this._port=r.DEFAULT_PORT,this._path=r.DEFAULT_PATH}return Object.defineProperty(t.prototype,"url",{get:function(){return this._resolveUrl()},enumerable:!1,configurable:!0}),t.prototype._resolveUrl=function(t){return"".concat(this._protocol,"://").concat(this._host,":").concat(this._port,"/").concat(t||this._path)},t}()},"./src/network-connection.consts.ts":
/*!******************************************!*\
  !*** ./src/network-connection.consts.ts ***!
  \******************************************/
/*! exports provided: DEFAULT_PORT, DEFAULT_HTTP_HEADERS, DEFAULT_HOST, DEFAULT_PATH, PING_PATH, DEFAULT_HTTP_CLIENT_PROTOCOL, DAPI_MAX_DETECT_TIME_MS, DAPI_MIN_PORT, DAPI_MAX_PORT, PORT_NOT_FOUND_ERROR, TIMEOUT_ERROR */function(t,e,n){"use strict";n.r(e),n.d(e,"DEFAULT_PORT",(function(){return r})),n.d(e,"DEFAULT_HTTP_HEADERS",(function(){return o})),n.d(e,"DEFAULT_HOST",(function(){return i})),n.d(e,"DEFAULT_PATH",(function(){return s})),n.d(e,"PING_PATH",(function(){return a})),n.d(e,"DEFAULT_HTTP_CLIENT_PROTOCOL",(function(){return c})),n.d(e,"DAPI_MAX_DETECT_TIME_MS",(function(){return u})),n.d(e,"DAPI_MIN_PORT",(function(){return l})),n.d(e,"DAPI_MAX_PORT",(function(){return p})),n.d(e,"PORT_NOT_FOUND_ERROR",(function(){return h})),n.d(e,"TIMEOUT_ERROR",(function(){return d}));var r=9e3,o={"Content-Type":"application/json"},i="localhost",s="sxs/v1",a="ping",c="http",u=3e3,l=9e3,p=9020,h="SxSDesktop port was not found",d="Request timed out"},"./src/polyfills/promise-any.ts":
/*!**************************************!*\
  !*** ./src/polyfills/promise-any.ts ***!
  \**************************************/
/*! no static exports found */function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},s=this;Promise.any||(Promise.any=function(t){return n(s,void 0,void 0,(function(){return r(this,(function(e){return[2,Promise.all(i([],o(t),!1).map((function(t){return new Promise((function(e,n){return Promise.resolve(t).then(n,e)}))}))).then((function(t){return Promise.reject(t)}),(function(t){return Promise.resolve(t)}))]}))}))})},"./src/sxs-application.classes.ts":
/*!****************************************!*\
  !*** ./src/sxs-application.classes.ts ***!
  \****************************************/
/*! exports provided: SxSApplication */function(t,e,n){"use strict";n.r(e),n.d(e,"SxSApplication",(function(){return s}));var r=n(/*! ./utils */"./src/utils/index.ts"),o=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},i=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=function(){function t(t,e){this._httpClient=t,this._instanceId=e}return t.prototype.sendContext=function(t){return o(this,void 0,void 0,(function(){var e,n;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._httpClient.post({command:"sendContext",targetInstanceId:this._instanceId,context:Object(r.formatContext)(t)})];case 1:return e=o.sent(),Object(r.handleErrorInResponse)(e),[2,e];case 2:throw n=o.sent(),new Error("Send context to app failed: ".concat(n.message));case 3:return[2]}}))}))},t.prototype.link=function(){return o(this,void 0,void 0,(function(){var t,e;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._httpClient.post({command:"link",targetInstanceId:this._instanceId})];case 1:return t=n.sent(),Object(r.handleErrorInResponse)(t),[2,t];case 2:throw e=n.sent(),new Error("Link app failed: ".concat(e.message));case 3:return[2]}}))}))},t.prototype.unlink=function(){return o(this,void 0,void 0,(function(){var t,e;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._httpClient.post({command:"unlink",targetInstanceId:this._instanceId})];case 1:return t=n.sent(),Object(r.handleErrorInResponse)(t),[2,t];case 2:throw e=n.sent(),new Error("Unlink app failed: ".concat(e.message));case 3:return[2]}}))}))},t}()},"./src/sxs-context-service.classes.ts":
/*!********************************************!*\
  !*** ./src/sxs-context-service.classes.ts ***!
  \********************************************/
/*! exports provided: SxSContextService */function(t,e,n){"use strict";n.r(e),n.d(e,"SxSContextService",(function(){return s}));var r=n(/*! ./utils */"./src/utils/index.ts"),o=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},i=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=function(){function t(t){this._sxsSession=t,this._addContextReceivedHandler()}return t.prototype.publishContext=function(t){return o(this,void 0,void 0,(function(){var e,n;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._sxsSession.httpClient.post({command:"contextChanged",context:Object(r.formatContext)(t)})];case 1:return e=o.sent(),Object(r.handleErrorInResponse)(e),this.syncContext(t),[2,e];case 2:throw n=o.sent(),new Error("Publish context failed: ".concat(n.message));case 3:return[2]}}))}))},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),t.prototype.syncContext=function(t){this._context=t},t.prototype.joinColorChannel=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._sxsSession.httpClient.post({command:"joinColorChannel",channelId:t,instanceId:this._sxsSession.instanceId})];case 1:return[2,n.sent().isSuccess];case 2:throw e=n.sent(),new Error("Join color channel failed: ".concat(e.message));case 3:return[2]}}))}))},t.prototype.leaveColorChannel=function(){return o(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._sxsSession.httpClient.post({command:"unjoinColorChannel"})];case 1:return[2,e.sent().isSuccess];case 2:throw t=e.sent(),new Error("Unjoin color channel failed: ".concat(t.message));case 3:return[2]}}))}))},t.prototype.getColorChannels=function(){return o(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._sxsSession.httpClient.post({command:"getColorChannelList"})];case 1:return[2,e.sent().channels];case 2:throw t=e.sent(),new Error("Get color channels list failed: ".concat(t.message));case 3:return[2]}}))}))},t.prototype.updateSupportedContext=function(t,e){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this._sxsSession.httpClient.post({command:"updateSupportedContext",instanceId:this._sxsSession.instanceId,broadcasts:t,receives:e})];case 1:return[2,r.sent().isSuccess];case 2:throw n=r.sent(),new Error("Updating supported context failed: ".concat(n.message));case 3:return[2]}}))}))},t.prototype._addContextReceivedHandler=function(){this._sxsSession.addEventHandler("contextReceived",this._onContextReceivedHandler.bind(this))},t.prototype._onContextReceivedHandler=function(t){var e=Object(r.parseContextFromEvent)(t);this.syncContext(e)},t}()},"./src/sxs-desktop-service.classes.ts":
/*!********************************************!*\
  !*** ./src/sxs-desktop-service.classes.ts ***!
  \********************************************/
/*! exports provided: SxSDesktopService */function(t,e,n){"use strict";n.r(e),n.d(e,"SxSDesktopService",(function(){return c}));var r=n(/*! ./network-connection.consts */"./src/network-connection.consts.ts"),o=n(/*! ./sxs-http-client.classes */"./src/sxs-http-client.classes.ts"),i=n(/*! ./sxs-session.classes */"./src/sxs-session.classes.ts"),s=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},a=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},c=function(){function t(t){this._httpClient=new o.SxSHttpClient(t)}return t.scanSxSPort=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t._scanPossiblePorts(r.DAPI_MIN_PORT,r.DAPI_MAX_PORT,r.DAPI_MAX_DETECT_TIME_MS)];case 1:return[2,e.sent()];case 2:throw e.sent(),new Error(r.PORT_NOT_FOUND_ERROR);case 3:return[2]}}))}))},t._scanPossiblePorts=function(e,n,o){return s(this,void 0,void 0,(function(){var i,s,c,u,l,p,h,d,f;return a(this,(function(a){switch(a.label){case 0:for(i=new AbortController,s=[],c=e;c<=n;c++)u=fetch(t._getUrl(c),{signal:i.signal}),s.push(u);l={abortController:i,resolveTimeoutPromise:null,timeoutId:null},p=new Promise((function(t,e){l.resolveTimeoutPromise=t,l.timeoutId=setTimeout((function(){return e(new Error(r.TIMEOUT_ERROR))}),o)})),a.label=1;case 1:return a.trys.push([1,4,,5]),h=Promise.any(s),[4,Promise.race([p,h])];case 2:return[4,a.sent().text()];case 3:return d=a.sent(),t._clearScanPortRequests(l),[2,t._formatPort(d)];case 4:throw f=a.sent(),new Error(f);case 5:return[2]}}))}))},t._getUrl=function(t){return"".concat(r.DEFAULT_HTTP_CLIENT_PROTOCOL,"://").concat(r.DEFAULT_HOST,":").concat(t,"/").concat(r.PING_PATH)},t._clearScanPortRequests=function(t){t.resolveTimeoutPromise(),clearTimeout(t.timeoutId),t.abortController.abort()},t._formatPort=function(t){return parseInt(t,10)},t.prototype.createSession=function(t,e){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(n=new i.SxSSession(this._httpClient,t,e)).create()];case 1:return o.sent(),[2,n];case 2:throw r=o.sent(),new Error("Session creation failed. ".concat(r.message));case 3:return[2]}}))}))},t}()},"./src/sxs-http-client.classes.ts":
/*!****************************************!*\
  !*** ./src/sxs-http-client.classes.ts ***!
  \****************************************/
/*! exports provided: SxSHttpClient */function(t,e,n){"use strict";n.r(e),n.d(e,"SxSHttpClient",(function(){return l}));var r,o=n(/*! ./network-connection.classes */"./src/network-connection.classes.ts"),i=n(/*! ./network-connection.consts */"./src/network-connection.consts.ts"),s=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)},c=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},u=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},l=function(t){function e(e){void 0===e&&(e=i.DEFAULT_PORT);var n=t.call(this)||this;return n._port=e,n._protocol=i.DEFAULT_HTTP_CLIENT_PROTOCOL,n}return s(e,t),Object.defineProperty(e.prototype,"sessionToken",{set:function(t){this._sessionToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"port",{get:function(){return this._port},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return c(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,fetch(this._resolveUrl(t),{headers:i.DEFAULT_HTTP_HEADERS})];case 1:return[2,e.sent().json()]}}))}))},e.prototype.post=function(t){return c(this,void 0,void 0,(function(){var e,n,r;return u(this,(function(o){switch(o.label){case 0:return(e=!!this._sessionToken)&&(n=a({sessionToken:this._sessionToken},t)),r=e?n:t,[4,fetch(this.url,{method:"POST",headers:i.DEFAULT_HTTP_HEADERS,body:JSON.stringify(r)})];case 1:return[2,o.sent().json()]}}))}))},e}(o.NetworkConnection)},"./src/sxs-session.classes.ts":
/*!************************************!*\
  !*** ./src/sxs-session.classes.ts ***!
  \************************************/
/*! exports provided: SxSSession */function(t,e,n){"use strict";n.r(e),n.d(e,"SxSSession",(function(){return h}));var r=n(/*! ./utils */"./src/utils/index.ts"),o=n(/*! ./sxs-application.classes */"./src/sxs-application.classes.ts"),i=n(/*! ./sxs-web-socket.classes */"./src/sxs-web-socket.classes.ts"),s=n(/*! ./sxs-context-service.classes */"./src/sxs-context-service.classes.ts"),a=n(/*! ./utils/error.utils */"./src/utils/error.utils.ts"),c=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},u=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},l=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},p=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},h=function(){function t(t,e,n){this._httpClient=t,this._apiKey=e,this._productId=n,this._sxsEventsMap=new Map}return t.prototype.create=function(){try{return this._getSessionTokenWithHandshake()}catch(t){throw new Error(t)}},Object.defineProperty(t.prototype,"instanceId",{get:function(){return this._sessionInstanceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpClient",{get:function(){return this._httpClient},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contextService",{get:function(){return!t._contextService&&(t._contextService=new s.SxSContextService(this)),t._contextService},enumerable:!1,configurable:!0}),t.prototype.openDeepLink=function(t,e,n){return void 0===e&&(e="Tile"),void 0===n&&(n=""),c(this,void 0,void 0,(function(){var r,i,s,c;return u(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this._httpClient.post({command:"openDeepLink",data:t,appOptions:{hideWindow:!1,hideOnClose:!1,targetType:e,targetAppInstanceId:n}})];case 1:if(r=u.sent(),i=r.isSuccess,s=r.instanceId,i&&s)return[2,new o.SxSApplication(this._httpClient,s)];throw r.error?Object(a.mapSxSHttpResponseError)(r):new Error("Unknown network error");case 2:throw(c=u.sent())instanceof a.SxSRequestError?c:new a.SxSRequestError(-32604,"Open deep link failed: ".concat(c.message));case 3:return[2]}}))}))},t.prototype.getAppList=function(t){return c(this,void 0,void 0,(function(){var e,n,r;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._httpClient.post({command:"getAppList",subInstanceId:t})];case 1:if(e=o.sent(),n=e.apps,e.isSuccess)return[2,n||[]];throw e.error?Object(a.mapSxSHttpResponseError)(e):new Error("Unknown network error");case 2:throw(r=o.sent())instanceof a.SxSRequestError?r:new a.SxSRequestError(-32604,"Get app list failed: ".concat(r.message));case 3:return[2]}}))}))},t.prototype.addEventHandler=function(t,e){var n=this._sxsEventsMap.get(t);n?this._sxsEventsMap.set(t,p(p([],l(n),!1),[e],!1)):this._sxsEventsMap.set(t,[e])},t.prototype._getSessionTokenWithHandshake=function(){return c(this,void 0,void 0,(function(){var t,e,n,o;return u(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._handshake()];case 1:return t=i.sent(),[3,3];case 2:throw e=i.sent(),new Error(e);case 3:return Object(r.handleErrorInResponse)(t),n=t.sessionToken,o=t.instanceId,this._httpClient.sessionToken=n,this._sessionInstanceId=o,this._openSocket(n),[2,t]}}))}))},t.prototype._handshake=function(){return this._httpClient.post({productId:this._productId,apiKey:this._apiKey,command:"handshake",instanceId:this._sessionInstanceId})},t.prototype._handleEvent=function(t){var e=this._extractCommandName(t.data),n=this._sxsEventsMap.get(e);n&&n.forEach((function(e){e instanceof Function&&e(t)}))},t.prototype._extractCommandName=function(t){var e=JSON.parse(t);return e&&e.command},t.prototype._openSocket=function(t){var e=this;if(this._webSocket)throw new Error("Socket connection is already opened. To open new connection create another session.");try{var n=this._httpClient.port;this._webSocket=new i.SxSWebSocket(t,n),this._webSocket.onMessageCallback=function(t){return e._handleEvent(t)}}catch(t){throw this._webSocket=void 0,new Error(t)}},t}()},"./src/sxs-web-socket.classes.ts":
/*!***************************************!*\
  !*** ./src/sxs-web-socket.classes.ts ***!
  \***************************************/
/*! exports provided: SxSWebSocket */function(t,e,n){"use strict";n.r(e),n.d(e,"SxSWebSocket",(function(){return a}));var r,o=n(/*! ./network-connection.classes */"./src/network-connection.classes.ts"),i=n(/*! ./network-connection.consts */"./src/network-connection.consts.ts"),s=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n,r){void 0===r&&(r=3);var o=t.call(this)||this;o._port=n,o._protocol="ws",o._onCloseCallback=function(){},o._onMessageCallback=function(){};try{o._verifyToken(e),o._path="".concat(i.DEFAULT_PATH,"/notifications?sessionToken=").concat(e,"&linkType=").concat(r),o._createWebSocketConnection(),o._addWebSocketHandlers()}catch(t){throw new Error(t)}return o}return s(e,t),Object.defineProperty(e.prototype,"onCloseCallback",{set:function(t){this._onCloseCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMessageCallback",{set:function(t){this._onMessageCallback=t},enumerable:!1,configurable:!0}),e.prototype._verifyToken=function(t){if(!t)throw new Error("Connection with SxSDesktop Server cannot be established if session token not set")},e.prototype._createWebSocketConnection=function(){try{this._webSocketConnection=new WebSocket(this.url)}catch(t){throw new Error("Connection with SxSDesktop Server cannot be established: ".concat(t))}},e.prototype._addWebSocketHandlers=function(){var t=this;this._webSocketConnection.onclose=function(e){t._onCloseCallback(e)},this._webSocketConnection.onmessage=function(e){t._onMessageCallback(e)}},e}(o.NetworkConnection)},"./src/utils/context.utils.ts":
/*!************************************!*\
  !*** ./src/utils/context.utils.ts ***!
  \************************************/
/*! exports provided: formatContext */function(t,e,n){"use strict";function r(t){return{entities:t}}n.r(e),n.d(e,"formatContext",(function(){return r}))},"./src/utils/error.utils.ts":
/*!**********************************!*\
  !*** ./src/utils/error.utils.ts ***!
  \**********************************/
/*! exports provided: SxSRequestError, mapSxSHttpResponseError */function(t,e,n){"use strict";n.r(e),n.d(e,"SxSRequestError",(function(){return i})),n.d(e,"mapSxSHttpResponseError",(function(){return s}));var r,o=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(t){function e(n,r){var o=t.call(this,r)||this;return o.code=n,o.message=r,Object.setPrototypeOf(o,e.prototype),o}return o(e,t),e}(Error);function s(t){var e,n;return new i(null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.code,null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.message)}},"./src/utils/http-client.utils.ts":
/*!****************************************!*\
  !*** ./src/utils/http-client.utils.ts ***!
  \****************************************/
/*! exports provided: handleErrorInResponse */function(t,e,n){"use strict";function r(t){if(!t.isSuccess)throw new Error(t.error.message)}n.r(e),n.d(e,"handleErrorInResponse",(function(){return r}))},"./src/utils/index.ts":
/*!****************************!*\
  !*** ./src/utils/index.ts ***!
  \****************************/
/*! exports provided: formatContext, handleErrorInResponse, parseContextFromEvent */function(t,e,n){"use strict";n.r(e);var r=n(/*! ./context.utils */"./src/utils/context.utils.ts");n.d(e,"formatContext",(function(){return r.formatContext}));var o=n(/*! ./http-client.utils */"./src/utils/http-client.utils.ts");n.d(e,"handleErrorInResponse",(function(){return o.handleErrorInResponse}));var i=n(/*! ./web-socket.utils */"./src/utils/web-socket.utils.ts");n.d(e,"parseContextFromEvent",(function(){return i.parseContextFromEvent}))},"./src/utils/web-socket.utils.ts":
/*!***************************************!*\
  !*** ./src/utils/web-socket.utils.ts ***!
  \***************************************/
/*! exports provided: parseContextFromEvent */function(t,e,n){"use strict";function r(t){try{var e=JSON.parse(t.data),n=e&&e.context;return JSON.parse(n)}catch(t){throw new Error("Context cannot be parsed: ".concat(t.message))}}n.r(e),n.d(e,"parseContextFromEvent",(function(){return r}))}})},t.exports=e()}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";function t(t){try{return{data:t()}}catch(t){return{err:t}}}var e,o,i,s,a;function c(t){return e[t]||""}function u(t){if(h(t,{includes:[".icp2.",".qa."]}))return"alpha";if(h(t,{includes:[".reutest.",".ppe."]}))return"beta";return h(t,{includes:[".cp.",".platform."],test:[/(cdn|workspace)\.refinitiv\.com/]})?"prod":"unknown"}function l(t){return"unknown"===t}function p(t){return t&&"environment"in t}function h(t,e){const n=e.includes&&e.includes.some((e=>t.includes(e))),r=e.test&&e.test.some((e=>e.test(t)));return n||r}n.r(r),n.d(r,{PromiseState:()=>E,init:()=>Ot,loadPluginAsync:()=>Et,ready:()=>It}),function(t){t.alpha="https://cdn.qa.refinitiv.com",t.beta="https://cdn.ppe.refinitiv.com",t.prod="https://cdn.refinitiv.com"}(e||(e={})),function(t){t.alpha="https://cdn.qa.refinitiv.com",t.beta="https://cdn.ppe.extranet.refinitiv.biz",t.prod="https://cdn.extranet.refinitiv.biz"}(o||(o={})),function(t){t.Get="GET",t.Post="POST"}(i||(i={})),function(t){t[t.NotModified=304]="NotModified",t[t.Ok=200]="Ok",t[t.InternalServerError=500]="InternalServerError"}(s||(s={})),function(t){t.ContentType="Content-Type",t.IfNoneMatch="If-None-Match",t.Etag="etag"}(a||(a={}));function d(t,e=document){return new Promise(((n,r)=>{const o=e.createElement("script");o.src=t,o.type="text/javascript",o.onload=n,o.onerror=r,e.head.appendChild(o)}))}const f="iPlanetDirectoryPro",g="rtk-mappings-object";class _ extends Error{constructor(t){super(`Plugin ${t} is not found`)}}class v extends Error{constructor(){super("Mappings not found in local storage")}}class S extends Error{constructor(){super("An error occurred while parsing mappings")}}class w extends Error{constructor(){super("Session indentifier is invalid")}}class y{constructor(t=localStorage){this._localStorage=t}getMappings(){const t=this._localStorage.getItem(g);if(!t)throw new v;const e=this._parseMappings(t);if(this._isSessionIdentifierValid(e.identifier))return e.data;throw new w}saveMappings(t){const e=this._getSessionIdentifierFromCookies();if(!e)return;const n={identifier:e,data:t};this._localStorage.setItem(g,JSON.stringify(n))}_getSessionIdentifierFromCookies(){const t=document.cookie.split("; ").find((t=>t.substring(0,19)===f));if(!t)return"";const[e,n]=t.split("=");return n||""}_parseMappings(t){const e=JSON.parse(t);if("identifier"in e&&"data"in e)return e;throw new S}_isSessionIdentifierValid(t){const e=this._getSessionIdentifierFromCookies();return!!e&&e===t}}class m extends Error{}class b{constructor(){this._loadingSteps=[]}get loadingSteps(){return this._loadingSteps}async performLoadingSteps({loadFn:t,originToUrlFn:e}){for(const n of this._loadingSteps){if(n.condition()){const r=n.origin(),o=n.originToUrlFn?n.originToUrlFn(r):e(r),{isSuccess:i,result:s}=await t(o);if(i)return{origin:r,result:s};if(!n.performNextStepOnFailure)throw new m}}throw new m}}const P=/^\/Apps\/([\w.-]+)\/([\w.-]+).*\/([\w.-]+.js)$/i;function k(t,e){return function(t){return void 0!==t.origin}(e)?function(t){const e="/"===t[t.length-1];return e?t.slice(0,t.length-1):t}(e.origin):x(t,e)}function x(t,{environment:e}){const n=t.navigator.userAgent.includes("EikonViewer")?"http:":"https:";switch(e){case"alpha":return`${n}//workspace.qa.refinitiv.com`;case"beta":return`${n}//workspace.ppe.refinitiv.com`;default:return`${n}//workspace.refinitiv.com`}}function T(t){try{const[e,n,r,o]=P.exec(t);return{appName:n,version:r,script:o}}catch(t){return{appName:"",version:"",script:""}}}function I(t){return!t.SxSSession||!t.SxSSession.ApiKey||!t.SxSSession.ProductId}class O extends b{setupLoadingSteps(t,e){this._loadingSteps=[{condition:()=>!!(null==e?void 0:e.Debug),origin:()=>k(t,e.Debug),performNextStepOnFailure:!1},{condition:()=>this._isSameOrigin(t),origin:()=>t.location.origin,performNextStepOnFailure:!1},{condition:()=>this._documentReferrerIsNotEmpty(t),origin:()=>new URL(t.document.referrer).origin,performNextStepOnFailure:!0},{condition:()=>!0,origin:()=>this._getAppServerOrigin(t)}]}_getAppServerOrigin(t){let e=u(t.location.origin);return l(e)&&(e="prod"),x(t,{environment:e})}_isSameOrigin(t){try{t.top.location.href;return!0}catch(t){return!1}}_documentReferrerIsNotEmpty(t){return""!==t.document.referrer}}var E;!function(t){t.FULFILLED="fulfilled",t.PENDING="pending",t.REJECTED="rejected"}(E||(E={}));class C{constructor(t){this._console=t}write(t,e,...n){t.messageLevel<t.logLevel||(n.length?this._console.log(e,...n):this._console.log(e))}}class D extends C{constructor(t=console){super(t)}}class A extends D{write(t,e,...n){if(!(t.messageLevel<t.logLevel))switch(t.messageLevel){case 2:this._console.warn(e,...n);break;case 3:case 4:this._console.error(e,...n);break;default:super.write(t,e,...n)}}}class M{constructor(t,e="RTK",n){this._logWriter=t,this._logSource=e,this._logLevel=n}setLoggingSource(t){this._logSource=t}setLoggingLevel(t){this._logLevel=t}log(t,e,...n){const r=this._getLogOptions(t);this._logWriter.write(r,e,...n)}_getLogOptions(t){return{logSource:this._logSource,logLevel:this._logLevel,messageLevel:t}}}class R extends M{constructor(t,e="RTK",n=1){super(t,e,n)}debug(t,...e){return super.log(0,t,...e)}info(t,...e){return super.log(1,t,...e)}warn(t,...e){return super.log(2,t,...e)}error(t,...e){return super.log(3,t,...e)}fatal(t,...e){return super.log(4,t,...e)}}class L{static getService(){return L._loggingServiceSingleton}static createNewInstance(t,e,n){const r=t||new A;return new R(r,e,n)}}L._loggingServiceSingleton=new R(new A);class N extends Error{constructor(t,e){super(t),this.pluginName=e}}class U{constructor(){this._cache={}}registerInstance(t,e){this._cache[t]=e}getInstance(t){return this._cache[t]}get Toolkit(){return this.getInstance("Toolkit")}set Toolkit(t){this.registerInstance("Toolkit",t)}get InitOptions(){return this.getInstance("initOptions")}set InitOptions(t){this.registerInstance("initOptions",t)}get ContainerType(){return this.getInstance("containerType")}set ContainerType(t){this.registerInstance("containerType",t)}get MessageService(){return this.getInstance("messageService")}set MessageService(t){this.registerInstance("messageService",t)}get Container(){return this.getInstance("container")}set Container(t){this.registerInstance("container",t)}get MessageConverterService(){return this.getInstance("messageConverterService")}set MessageConverterService(t){this.registerInstance("messageConverterService",t)}get DataService(){return this.getInstance("dataService")}set DataService(t){this.registerInstance("dataService",t)}get UnloadService(){return this.getInstance("unloadService")}set UnloadService(t){this.registerInstance("unloadService",t)}get LoadService(){return this.getInstance("loadService")}set LoadService(t){this.registerInstance("loadService",t)}get ContainerInfo(){return this.getInstance("containerInfo")}set ContainerInfo(t){this.registerInstance("containerInfo",t)}get LoggingService(){return this.getInstance("loggingService")}set LoggingService(t){this.registerInstance("loggingService",t)}get DataRequestService(){return this.getInstance("dataRequestService")}set DataRequestService(t){this.registerInstance("dataRequestService",t)}get PlatformDetector(){return this.getInstance("platformDetector")}set PlatformDetector(t){this.registerInstance("platformDetector",t)}get InteropService(){return this.getInstance("interopService")}set InteropService(t){this.registerInstance("interopService",t)}get Mode(){return this.getInstance("mode")}set Mode(t){this.registerInstance("mode",t)}}var F,j,W,H,q,$,G,K,J;!function(t){t.SxS="sxs",t.Container="container"}(F||(F={})),function(t){t.CDN="cdn",t.App="app"}(j||(j={})),function(t){t.NONE="none",t.AAA="aaa",t.SSO="sso"}(W||(W={})),function(t){t.Iframe="iframe",t.Popup="popup",t.Tab="tab"}(H||(H={})),function(t){t.SxSDesktop="sxsdesktop",t.SxSWeb="sxsweb"}(q||(q={})),function(t){t.Public="public",t.Private="private"}($||($={})),function(t){t.RefinitivWorkspace="refinitivworkspace",t.Eikon4="eikon4"}(G||(G={})),function(t){t.EikonDesktop="Eikon",t.EikonWeb="EikonWeb",t.Workspace="Workspace",t.WorkspaceWeb="WorkspaceWeb",t.Unknown="Unknown"}(K||(K={})),function(t){t.EikonDesktop="EikonDesktop",t.WorkspaceDesktop="WorkspaceDesktop",t.WorkspaceEmbed="WorkspaceEmbed",t.AppContainer="AppContainer",t.Containerless="Containerless",t.SxSDesktop="SxSDesktop",t.Standalone="Standalone",t.OpenContainer="OpenContainer",t.OpenFin="OpenFin"}(J||(J={}));const X="manual";class V{getPlatformName(){return this._platformName}getIntegrationPlugin(){return this._integrationPlugin}}class B extends V{constructor(){super(...arguments),this._platformName="Standalone",this._integrationPlugin=J.Standalone}async detect(){return!0}}class z extends V{_getNavigator(t){try{return t.navigator.userAgent||""}catch(t){return""}}_getParent(t){const e=t.opener;if(!!e)return e;const n=t.parent;if(!!n&&t!==n)return n}}class Q extends z{constructor(){super(...arguments),this._platformName="RefinitivWorkspace",this._loggingService=L.getService()}async detect(t,e=window){const n=this._getContainerType(e);this._defineIntegrationPlugin(n);return!!n}_getContainerType(t=window){return this._isWeb(t)?"web":this._isDesktopWorkspace(t)?"workspace":void 0}_defineIntegrationPlugin(t){switch(t){case"web":this._integrationPlugin=J.AppContainer;break;case"workspace":this._integrationPlugin=J.WorkspaceDesktop}}_isWeb(e){let n=0,r=e;for(;r;){const{data:e,err:o}=t((()=>!!r.frames.EikonNowMarker));if(e&&!o)return true;r=this._getParent(r),n++;if(1e3===n)return this._loggingService.error("Frame has not been found"),false}return false}_isDesktopWorkspace(t){const e=this._getNavigator(t),n=e.indexOf("RefinitivWorkspace")>-1,r=e.indexOf("LSEGWorkspace")>-1;return n||r}}var Y,Z=n(887);class tt extends V{constructor(){super(...arguments),this._platformName="SxSDesktop",this._integrationPlugin=J.SxSDesktop,this._loggingService=L.getService()}get port(){return this._port}get SxSSession(){return this._sxsSession}async detect(t){if(I(t))return!1;if(t.SxSSession.Type!==q.SxSDesktop)return!1;try{this._port=await Z.SxSDesktopService.scanSxSPort()}catch(t){this._loggingService.info(t)}if(!this._port)return!1;const e=t.SxSSession.ApiKey,n=t.SxSSession.ProductId;return await this._checkDeepLinkingSupport(e,n)}async _checkDeepLinkingSupport(t,e){this._sxsDesktopService=new Z.SxSDesktopService(this._port);try{return this._sxsSession=await this._sxsDesktopService.createSession(t,e),await this._sxsSession.openDeepLink(tt.DEEP_LINK_TEST_QUERY),!1}catch(t){const e=-32601!==(null==t?void 0:t.code);return e||this._loggingService.error(`SxSDesktop failed: ${t}`),e}}}tt.DEEP_LINK_TEST_QUERY="query:@NULL:NULL";class et extends V{constructor(){super(...arguments),this._platformName="WorkspaceEmbed",this._integrationPlugin=J.WorkspaceEmbed}async detect(t){return!I(t)}}class nt extends z{constructor(){super(...arguments),this._platformName="RefinitivEikon",this._integrationPlugin=J.EikonDesktop}async detect(e,n=window){let r=n,o=!1;for(;r;){const{data:e,err:n}=t((()=>r.registerWithJET||r.registerWithAsyncCCFContainer));o=e&&!n,r=this._getParent(r)}return o}}class rt extends V{constructor(){super(...arguments),this._platformName="Containerless",this._integrationPlugin=J.WorkspaceEmbed}async detect(t){return!0}}class ot extends V{constructor(){super(...arguments),this._platformName="OpenContainer",this._integrationPlugin=J.OpenContainer}async detect(t){return!0}}class it extends V{constructor(){super(...arguments),this._platformName="OpenFin",this._integrationPlugin=J.OpenFin,this._loggingService=L.getService()}async detect(t,e=window){var n;const r=null===(n=e.fin)||void 0===n?void 0:n.System,o=null==r?void 0:r.getRuntimeInfo;if(!("function"==typeof o))return!1;try{const t=await o.call(r);return!!t&&"object"==typeof t}catch(t){return this._loggingService.error(t),!1}}}class st{static get(t){switch(t){case"Standalone":return new B;case"RefinitivWorkspace":return new Q;case"RefinitivEikon":return new nt;case"SxSDesktop":return new tt;case"WorkspaceEmbed":return new et;case"Containerless":return new rt;case"OpenContainer":return new ot;case"OpenFin":return new it;default:throw new at(t)}}}class at extends Error{constructor(t){super(`Unknown platform requested: ${t}`)}}!function(t){t.WSDK="WSDK",t.RTK="RTK"}(Y||(Y={}));class ct{constructor(t){this._supportedPlatforms=[];if(!((null==t?void 0:t.length)>0))throw new ut;this._supportedPlatforms=this._createPlatformInstancesIfNeeded(t)}addServiceAvailabilityProperty(t,e){!t||(this._servicesAvailability[t]=e)}get exposedToolkitName(){return this._exposedToolkitName}get modeName(){return this._modeName}get servicesAvailability(){return this._servicesAvailability}get gatherUsageStats(){return this._gatherUsageStats}get mappingsSource(){return this._mappingsSource}get supportedPlatforms(){return this._supportedPlatforms}get requiredInitOptions(){return this._requiredInitOptions}_createPlatformInstancesIfNeeded(t){return t.map((t=>"string"==typeof t?st.get(t):t))}}class ut extends Error{constructor(){super("At least one platform should be provided")}}class lt extends ct{constructor(){super(...arguments),this._modeName=F.Container,this._servicesAvailability={Interop:!0,Session:!0},this._gatherUsageStats=!0,this._mappingsSource=j.App,this._requiredInitOptions=["Mode","AppInstanceId"]}}class pt extends lt{constructor(){super(["RefinitivWorkspace"]),this._exposedToolkitName=Y.WSDK}}class ht extends lt{constructor(){super(["RefinitivWorkspace","RefinitivEikon","Containerless"]),this._exposedToolkitName=Y.RTK}}const dt=void 0;class ft extends ct{constructor(t){var e;super(null!==(e=null==t?void 0:t.supportedPlatforms)&&void 0!==e?e:["RefinitivWorkspace"]),this._modeName=X,this._requiredInitOptions=["Mode","AppInstanceId"],this._exposedToolkitName=dt,this._gatherUsageStats=!0,this._mappingsSource=j.App,this._servicesAvailability={Interop:!0,Session:!0},this._parseModeOptions(t)}_parseModeOptions(t){this._setExposedToolkitNameIfProvided(null==t?void 0:t.exposedToolkitName),this._setGatherUsageStatsIfProvided(null==t?void 0:t.gatherUsageStats),this._setMappingsSourceIfProvided(null==t?void 0:t.mappingsSource),this._setServicesAvailabilityIfProvided(null==t?void 0:t.servicesAvailability)}_setExposedToolkitNameIfProvided(t){t&&"string"==typeof t&&(this._exposedToolkitName=t)}_setGatherUsageStatsIfProvided(t){"boolean"==typeof t&&(this._gatherUsageStats=t)}_setMappingsSourceIfProvided(t){[j.App,j.CDN].includes(t)&&(this._mappingsSource=t)}_setServicesAvailabilityIfProvided(t){if(!!!t)return;"boolean"==typeof t.Interop&&(this._servicesAvailability.Interop=t.Interop);"boolean"==typeof t.Session&&(this._servicesAvailability.Session=t.Session)}}class gt extends ct{constructor(){super(["RefinitivWorkspace","SxSDesktop","WorkspaceEmbed"]),this._modeName=F.SxS,this._servicesAvailability={Interop:!1,Session:!1},this._gatherUsageStats=!1,this._mappingsSource=j.CDN,this._requiredInitOptions=["Mode"],this._exposedToolkitName=dt}}class _t{getMode(t,e=!1){switch(t.Mode){case F.Container:return e?new ht:new pt;case F.SxS:if(e)throw new vt;return new gt;case X:if(e)return new ft(t.ModeOptions);throw new vt;default:throw new vt}}}class vt extends Error{constructor(){super("Invalid Mode requested")}}class St{constructor(t){this._platforms=t}async detectCurrentPlatform(t){let e=!1;for(const n of this._platforms)if(e=await n.detect(t),e){this._currentPlatform=n;break}return e||this._throwPlatformUndetectedError(),e}getCurrentPlatform(){return this._currentPlatform}_throwPlatformUndetectedError(){throw new Error("Platform cannot be detected.")}}class wt extends Error{constructor(t){super(`${t} has already been initialized. Second ${t} initialization is not possible.`)}}Promise.allSettled=Promise.allSettled||(t=>{const e=t.map((t=>t.then((t=>({status:"fulfilled",value:t}))).catch((t=>({status:"rejected",reason:t})))));return Promise.all(e)});const yt=new class{constructor(t=window){this._window=t}get(t){const{url:e,headers:n}=t,r=this._getRequestMode(e),o=this._getCredentialsMode(),s={method:i.Get,headers:n,mode:r,credentials:o},a=new Request(e,s);return fetch(a)}post(t){const{url:e,headers:n,body:r}=t,o=this._getRequestMode(e),s=this._getCredentialsMode(),a={method:i.Post,headers:n,body:r,mode:o,credentials:s},c=new Request(e,a);return fetch(c)}_getRequestMode(t){return this._extractOrigin(t)===this._extractOrigin(this._window.location.origin)?"same-origin":"cors"}_extractOrigin(t){const[e,n,r]=t.split("/");return r}_getCredentialsMode(){const{err:e,data:n}=t((()=>{return t=this._window.location.origin,new RegExp("localhost|127.0.0.1").test(t);var t}));return!e&&n?"same-origin":"include"}},mt=new class{createRegistry(){return new U}},bt=new class{constructor(t=window,e=new y,n=new O){this._window=t,this._mappingsStorage=e,this._appServerOriginsLoaderService=n,this._loadMappingsScript=async t=>{try{await d(t);const e=this._getMappingsFromWindow();return{isSuccess:!!e,result:e}}catch(t){return{isSuccess:!1}}},this._getMappingsAppserverUrl=t=>`${t}/Apps/RefinitivWebToolkitMappings/mappings?format=jsonp`}async getMappings(t){return!this._mappings&&(this._mappings=await this._getMappings(t)),this._mappings}resetMappings(){this._mappings=void 0}async resolveMappingsForPlatform(t){if(this._getMappingsFromWindow())return;let e=function(t,e){return p(null==e?void 0:e.Debug)?e.Debug.environment:u(t)}(window.location.origin,t);l(e)&&(e="prod");const n=`${c(e)}/public/libs/workspace-sdk-mappings/mappings.js`;await d(n)}async getPluginPath(t,e){const n=(await this.getMappings(e))[t];if(!!n)return n;throw new _(t)}async _getMappings(t){const e=this._getMappingsFromWindow()||this._getMappingsFromStorage();if(e)return e;this._appServerOriginsLoaderService.setupLoadingSteps(this._window,t);const{result:n}=await this._appServerOriginsLoaderService.performLoadingSteps({loadFn:this._loadMappingsScript,originToUrlFn:this._getMappingsAppserverUrl});return this._saveMappingsToStorage(n),n}_getMappingsFromWindow(){return this._window.wsdkMappings}_getMappingsFromStorage(){try{return this._mappingsStorage.getMappings()}catch(t){return void 0}}_saveMappingsToStorage(t){this._mappingsStorage.saveMappings(t)}},Pt=new class{constructor(t,e=new R(new A),n=window){this._httpClient=t,this._loggingService=e,this._window=n}async logData(t={},e,n=!0){if(n){const n=this._getPIUrl(t.Debug);await this._makeRequest(n,e)}}_getPIUrl(t){let e="";return t&&(e=k(this._window,t)),`${e}/Apps/pi-deduplicator/log-data?project=rtk`}_makeRequest(t,e){const n={url:t,headers:{[a.ContentType]:"application/json"},body:JSON.stringify(e)};try{return this._httpClient.post(n)}catch(t){this._loggingService.error(t)}}}(yt),kt=new class{constructor(t,e,n=window,r=new O){this._mappingsService=t,this._piDataService=e,this._window=n,this._appServerOriginsLoaderService=r,this._window.PluginsInfoMap=this._window.PluginsInfoMap||new Map}async loadIntegrationPlugin(t,e,n){const r=this._getIntegrationPluginName(e);return this._logUsageStatsData(r,t,e,n),this.loadPlugin(r,t)}async loadPlugin(t,e){try{if(this._isPluginLoaded(t))return this._getLoadedPlugin(t);const n=await this._mappingsService.getPluginPath(t,e);return!!e.CDN?this._loadFromCDN(e,t,n):await this._loadFromAppserver(e,t,n)}catch(e){this._handleLoadingError(t)}}_isPluginLoaded(t){return this._window.PluginsInfoMap.has(t)}_getLoadedPlugin(t){return this._window.PluginsInfoMap.get(t)}_getIntegrationPluginName(t){return t.PlatformDetector.getCurrentPlatform().getIntegrationPlugin()}async _loadFromCDN(t,e,n){const r=this._getPluginCDNOrigin(t.Debug),o=this._getPluginCDNUrl(e,r,n),{isSuccess:i,result:s}=await this._loadPluginScript(e,o,t);if(i)return s;throw new Error}async _loadFromAppserver(t,e,n){this._appServerOriginsLoaderService.setupLoadingSteps(this._window,t);const{result:r}=await this._appServerOriginsLoaderService.performLoadingSteps({loadFn:n=>this._loadPluginScript(e,n,t),originToUrlFn:t=>this._getPluginAppserverUrl(t,n)});return r}async _loadPluginScript(t,e,n){try{if(await d(e),this._isPluginLoaded(t)){return{isSuccess:!0,result:this._getLoadedPlugin(t)}}return{isSuccess:!1}}catch(t){return{isSuccess:!1}}}_getPluginAppserverUrl(t,e){return`${t}${e}`}_getPluginCDNOrigin(t){return c(p(t)?t.environment:"prod")}_getPluginCDNUrl(t,e,n){const{version:r,script:o}=T(n);return`${e}/public/libs/rtk/plugins/${t.toLowerCase()}/${r}/${o}`}_handleLoadingError(t){const e=`Failed to load ${t} plugin`;throw L.getService().error(e),new N(e,t)}_logUsageStatsData(t,e,n,r){const o=this._buildMetadata(t,e,n,r),i=n.Mode.gatherUsageStats;this._piDataService.logData(e,o,i)}_buildMetadata(t,e,n,r){const o=this._extractPluginNamesFromPluginsList(r),i=function(t){try{return t.document.URL.match(/\/Apps\/([\w-]*)[\/\?]?/)[1]}catch(t){return""}}(this._window),s={appId:e.AppInstanceId,appName:i,integrationPlugin:t,plugins:o,version:n.Toolkit.Version};return!i&&e.SxSSession&&(s.origin=this._window.origin,s.productId=e.SxSSession.ProductId),s}_extractPluginNamesFromPluginsList(t){return t.map((t=>"object"==typeof t?t.name:t))}}(bt,Pt,window),xt=new class{constructor(t){this._pluginsLoaderService=t,this._pluginOptionsMap={}}async bootstrapIntegrationPlugin(t,e,n){const{bootstrap:r}=await this._pluginsLoaderService.loadIntegrationPlugin(t,e,n);await r(t,e)}async bootstrapPlugins(t,e,n,r=new Set){const o=await this._loadPlugins(t,e,n),i=this._getPluginsInfoFromLoadResults(o),s=this._getPluginsDependencies(i);await this._bootstrapDependencies(s,e,n,r);const a=await this._handleBootstrapPlugins(i,e,r);this._reportPromisesStatus(a,e.LoggingService)}_handleBootstrapPlugins(t,e,n){const r=t.reduce(((t,r)=>{if(!n.has(r.name)){n.add(r.name);const{bootstrap:o,name:i}=r,s=this._pluginOptionsMap[i];let a;try{a=o(e,s)}catch(t){a=Promise.reject(`Failed to bootstrap ${i} plugin`)}return[...t,a]}return t}),[]);return Promise.allSettled(r)}_loadPlugins(t,e,n){const r=t.reduce(((t,r)=>{let o;try{o=this._extractPluginData(r)}catch(n){return e.LoggingService.warn(n.message),t}this._extractPluginOptions(o,r);const{pluginName:i}=o;return[...t,this._handleLoadPlugin(i,n)]}),[]);return Promise.allSettled(r)}_extractPluginData(t){const e="object"==typeof t;let n;if(e){const e=t;if(!e.hasOwnProperty("name"))throw new Error(`Plugin without name cannot be loaded: ${JSON.stringify(e)}`);n=e.name}else n=t;return{pluginName:n.toString(),isPluginConfigTypeObject:e}}_handleLoadPlugin(t,e){return this._pluginsLoaderService.loadPlugin(t,e).then((e=>Object.assign(Object.assign({},e),{name:t})))}_getPluginsInfoFromLoadResults(t){return t.reduce(((t,{value:e,status:n})=>n===E.FULFILLED?[...t,e]:t),[])}_extractPluginOptions(t,e){try{const{pluginName:n,isPluginConfigTypeObject:r}=t;r&&this._addPluginOptionsToOptionsMap(n,e)}catch(t){}}_addPluginOptionsToOptionsMap(t,e){this._pluginOptionsMap[t]=e}_getPluginsDependencies(t){return t.reduce(((t,{dependencies:e})=>{const n=e.filter((e=>-1===t.indexOf(e)));return[...t,...n]}),[])}async _bootstrapDependencies(t,e,n,r){!!t.length&&await this.bootstrapPlugins(t,e,n,r)}_reportPromisesStatus(t,e){t.forEach((t=>{t.status===E.REJECTED&&e.error(t.reason)}))}}(kt),Tt=new class{constructor(t,e,n,r=new _t){this._registryFactory=t,this._pluginsBootstrapService=e,this._mappingsService=n,this._modeFactory=r,this._isToolkitInited=!1,this._publicToolkit={},this.ready=()=>this._toolkitPromise,this._initToolkitPromise()}async init(t,e=[],n){if(this._isToolkitInited)return this._handleAlreadyInited(n);this._initOptions=t,this._resolveAppInstanceId(),this._toolkit={},this._registry=this._registryFactory.createRegistry(),this._registry.Toolkit=this._toolkit,this._registry.Mode=this._modeFactory.getMode(this._initOptions,n),this._validateInitOptions(),await this._checkCDNPlatforms(),this._mappingsService.resetMappings(),this._platformDetector=new St(this._registry.Mode.supportedPlatforms),this._registry.PlatformDetector=this._platformDetector,await this._platformDetector.detectCurrentPlatform(this._initOptions),await this._pluginsBootstrapService.bootstrapIntegrationPlugin(this._initOptions,this._registry,e),this._setToolkitVersion(),this._exposeToolkitObject(),await this._pluginsBootstrapService.bootstrapPlugins(e,this._registry,this._initOptions),this._setPublicToolkit(),this._registry.UnloadService.onUnload((()=>this._toolkitPromise)),this._registry.LoadService.finishLoading(),this._isToolkitInited=!0;const r=this._publicToolkit;return this._resolveToolkitPromise(r),this._toolkitPromise}async getPlugins(){const t=await this._mappingsService.getMappings(),e=Object.keys(t),n=[J.EikonDesktop,J.WorkspaceDesktop,J.AppContainer];return e.filter((t=>n.indexOf(t)<0)).map((e=>{const n=t[e],{version:r}=T(n);return{name:e,version:r}}))}async loadPluginAsync(t){return await this._pluginsBootstrapService.bootstrapPlugins([t],this._registry,this._initOptions),this._setPublicToolkit(),this._publicToolkit}_validateInitOptions(){if("object"!=typeof this._initOptions)throw new Error(`In init function Object with properties is expected: ${this._registry.Mode.requiredInitOptions}`);this._registry.Mode.requiredInitOptions.forEach((t=>{if(!this._initOptions[t])throw new Error(`The following init option is missing: ${t}`)}))}async _checkCDNPlatforms(){this._registry.Mode.mappingsSource===j.CDN&&(this._initOptions.CDN=!0,await this._mappingsService.resolveMappingsForPlatform(this._initOptions))}_setPublicToolkit(){const t=this._registry.Mode.servicesAvailability;t&&Object.keys(this._toolkit).forEach((e=>{!1!==t[e]&&(this._publicToolkit[e]=this._toolkit[e])}))}_handleAlreadyInited(t){const e=t?"RTK":"Workspace-SDK";return Promise.reject(new wt(e))}_initToolkitPromise(){this._toolkitPromise=new Promise((t=>{this._resolveToolkitPromise=t}))}_setToolkitVersion(){this._toolkit.Version="3.3.0"}_exposeToolkitObject(){!!this._registry.Mode.exposedToolkitName&&(window[this._registry.Mode.exposedToolkitName]=this._publicToolkit)}_resolveAppInstanceId(){const t=this._initOptions.SxSSession,e=!this._initOptions.AppInstanceId,n=t&&t.hasOwnProperty("ProductId");e&&n&&(this._initOptions.AppInstanceId=t.ProductId)}}(mt,xt,bt),It=()=>Tt.ready();function Ot(t,e=[]){return Tt.init(t,e)}function Et(t){return Tt.loadPluginAsync(t)}})(),r})()));